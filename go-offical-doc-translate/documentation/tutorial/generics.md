# æ•™ç¨‹ï¼šå¼€å§‹ä½¿ç”¨æ³›åž‹

> **[â†© è¿”å›žåˆ°ç›®å½•](../doc.md)**
## ç›®å½•

- å…ˆå†³æ¡ä»¶
- ä¸ºä»£ç åˆ›å»ºæ–‡ä»¶å¤¹
- æ·»åŠ éžæ³›åž‹å‡½æ•°
- æ·»åŠ ä¸€ä¸ªèƒ½å¤„ç†å¤šç§ç±»åž‹çš„æ³›åž‹å‡½æ•°
- è°ƒç”¨æ³›åž‹å‡½æ•°æ—¶çœç•¥ç±»åž‹å‚æ•°
- å£°æ˜Žä¸€ä¸ªç±»åž‹çº¦æŸ
- ç»“è¯­
- å®Œæ•´ä»£ç 

---

æœ¬æ•™ç¨‹å°†ä»‹ç» Go è¯­è¨€ä¸­æ³›åž‹çš„åŸºç¡€çŸ¥è¯†ã€‚é€šè¿‡æ³›åž‹ï¼Œä½ å¯ä»¥å£°æ˜Žå¹¶ä½¿ç”¨é‚£äº›èƒ½å¤Ÿå¤„ç†è°ƒç”¨æ–¹æä¾›çš„ä»»æ„ä¸€ç»„ç±»åž‹çš„å‡½æ•°æˆ–ç±»åž‹ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä½ å°†å…ˆå£°æ˜Žä¸¤ä¸ªç®€å•çš„éžæ³›åž‹å‡½æ•°ï¼Œç„¶åŽç”¨ä¸€ä¸ªæ³›åž‹å‡½æ•°æ¥ç»Ÿä¸€å®žçŽ°å®ƒä»¬çš„é€»è¾‘ã€‚

ä½ å°†ä¾æ¬¡å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š

- ä¸ºä»£ç åˆ›å»ºæ–‡ä»¶å¤¹
- æ·»åŠ éžæ³›åž‹å‡½æ•°
- æ·»åŠ ä¸€ä¸ªèƒ½å¤„ç†å¤šç§ç±»åž‹çš„æ³›åž‹å‡½æ•°
- è°ƒç”¨æ³›åž‹å‡½æ•°æ—¶çœç•¥ç±»åž‹å‚æ•°
- å£°æ˜Žä¸€ä¸ªç±»åž‹çº¦æŸ

> **æç¤º**ï¼šæ›´å¤šæ•™ç¨‹è¯·å‚è§ [Go å®˜æ–¹æ•™ç¨‹åˆ—è¡¨](https://go.dev/doc/tutorial/)ã€‚

> **æç¤º**ï¼šä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Go Playground çš„â€œGo dev branchâ€æ¨¡å¼æ¥ç¼–è¾‘å’Œè¿è¡Œç¨‹åºã€‚

---

### å…ˆå†³æ¡ä»¶

- å®‰è£…äº† Go 1.18 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚å®‰è£…æ–¹æ³•è¯·å‚è€ƒ [å®‰è£… Go](https://go.dev/doc/install)ã€‚
- ä¸€ä¸ªä»£ç ç¼–è¾‘å™¨ã€‚ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨éƒ½å¯ä»¥ã€‚
- ä¸€ä¸ªå‘½ä»¤è¡Œç»ˆç«¯ã€‚Linux å’Œ Mac ç”¨æˆ·å¯ä½¿ç”¨ä»»æ„ç»ˆç«¯ï¼ŒWindows ç”¨æˆ·å¯ä½¿ç”¨ PowerShell æˆ– cmdã€‚

---

### ä¸ºä»£ç åˆ›å»ºæ–‡ä»¶å¤¹

é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹æ¥å­˜æ”¾ä½ çš„ä»£ç ã€‚

1. æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ä½ çš„ä¸»ç›®å½•ã€‚

   åœ¨ Linux æˆ– Mac ä¸Šï¼š

   ```bash
   $ cd
   ```

   åœ¨ Windows ä¸Šï¼š

   ```cmd
   C:\> cd %HOMEPATH%
   ```

   åŽç»­æ•™ç¨‹ä¸­çš„å‘½ä»¤æç¤ºç¬¦ç»Ÿä¸€ä½¿ç”¨ `$`ï¼Œä½†è¿™äº›å‘½ä»¤åœ¨ Windows ä¸ŠåŒæ ·é€‚ç”¨ã€‚

2. åˆ›å»ºä¸€ä¸ªåä¸º `generics` çš„ç›®å½•ï¼š

   ```bash
   $ mkdir generics
   $ cd generics
   ```

3. åˆ›å»ºä¸€ä¸ªæ¨¡å—æ¥ç®¡ç†ä½ çš„ä»£ç ä¾èµ–ï¼š

   ```bash
   $ go mod init example/generics
   go: creating new go.mod: module example/generics
   ```

   > **æç¤º**ï¼šåœ¨ç”Ÿäº§çŽ¯å¢ƒä¸­ï¼Œä½ åº”è¯¥ä½¿ç”¨æ›´å…·ä½“çš„æ¨¡å—è·¯å¾„ã€‚è¯¦æƒ…è¯·å‚è€ƒ [ç®¡ç†ä¾èµ–](https://go.dev/ref/mod#module-path)ã€‚

æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€äº›ç®€å•çš„ä»£ç æ¥æ“ä½œæ˜ å°„ï¼ˆmapï¼‰ã€‚

---

### æ·»åŠ éžæ³›åž‹å‡½æ•°

åœ¨è¿™ä¸€æ­¥ï¼Œä½ å°†æ·»åŠ ä¸¤ä¸ªå‡½æ•°ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºŽè®¡ç®—ä¸€ä¸ªæ˜ å°„ä¸­æ‰€æœ‰å€¼çš„æ€»å’Œã€‚

ä¹‹æ‰€ä»¥è¦å£°æ˜Žä¸¤ä¸ªå‡½æ•°è€Œä¸æ˜¯ä¸€ä¸ªï¼Œæ˜¯å› ä¸ºä½ è¦å¤„ç†ä¸¤ç§ä¸åŒç±»åž‹çš„æ˜ å°„ï¼šä¸€ç§å­˜å‚¨ `int64` å€¼ï¼Œå¦ä¸€ç§å­˜å‚¨ `float64` å€¼ã€‚

#### ç¼–å†™ä»£ç 

1. åœ¨ `generics` ç›®å½•ä¸‹ï¼Œç”¨ç¼–è¾‘å™¨åˆ›å»ºä¸€ä¸ªåä¸º `main.go` çš„æ–‡ä»¶ã€‚

2. åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ åŒ…å£°æ˜Žï¼š

   ```go
   package main
   ```

   æ‰€æœ‰ç‹¬ç«‹è¿è¡Œçš„ Go ç¨‹åºï¼ˆéžåº“ï¼‰éƒ½å±žäºŽ `main` åŒ…ã€‚

3. åœ¨åŒ…å£°æ˜Žä¸‹æ–¹ï¼Œæ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°ï¼š

   ```go
   // SumInts è®¡ç®— map ä¸­æ‰€æœ‰ int64 å€¼çš„æ€»å’Œ
   func SumInts(m map[string]int64) int64 {
       var s int64
       for _, v := range m {
           s += v
       }
       return s
   }

   // SumFloats è®¡ç®— map ä¸­æ‰€æœ‰ float64 å€¼çš„æ€»å’Œ
   func SumFloats(m map[string]float64) float64 {
       var s float64
       for _, v := range m {
           s += v
       }
       return s
   }
   ```

   è¯´æ˜Žï¼š

    - ä¸¤ä¸ªå‡½æ•°åŠŸèƒ½ç›¸åŒï¼Œåªæ˜¯å¤„ç†çš„æ•°æ®ç±»åž‹ä¸åŒï¼›
    - `SumInts` æŽ¥æ”¶ `map[string]int64` ç±»åž‹çš„å‚æ•°ï¼›
    - `SumFloats` æŽ¥æ”¶ `map[string]float64` ç±»åž‹çš„å‚æ•°ã€‚

4. åœ¨ `main.go` æ–‡ä»¶ä¸­ï¼Œæ·»åŠ  `main` å‡½æ•°æ¥åˆå§‹åŒ–æ•°æ®å¹¶è°ƒç”¨ä¸Šè¿°å‡½æ•°ï¼š

   ```go
   func main() {
       // åˆå§‹åŒ–ä¸€ä¸ªå­˜å‚¨ int64 å€¼çš„æ˜ å°„
       ints := map[string]int64{
           "first":  34,
           "second": 12,
       }
       // åˆå§‹åŒ–ä¸€ä¸ªå­˜å‚¨ float64 å€¼çš„æ˜ å°„
       floats := map[string]float64{
           "first":  35.98,
           "second": 26.99,
       }

       fmt.Printf("éžæ³›åž‹æ±‚å’Œ: %v å’Œ %v\n",
           SumInts(ints),
           SumFloats(floats))
   }
   ```

5. åœ¨åŒ…å£°æ˜Žä¸‹æ–¹ï¼Œå¯¼å…¥æ‰€éœ€çš„åŒ…ï¼š

   ```go
   import "fmt"
   ```

6. ä¿å­˜ `main.go`ã€‚

#### è¿è¡Œä»£ç 

åœ¨ `main.go` æ‰€åœ¨ç›®å½•ä¸‹è¿è¡Œï¼š

```bash
$ go run .
```

è¾“å‡ºåº”ä¸ºï¼š

```
éžæ³›åž‹æ±‚å’Œ: 46 å’Œ 62.97
```

ä½¿ç”¨æ³›åž‹ï¼Œä½ å¯ä»¥ç”¨ä¸€ä¸ªå‡½æ•°ä»£æ›¿è¿™ä¸¤ä¸ªå‡½æ•°ã€‚æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªèƒ½åŒæ—¶å¤„ç†æ•´æ•°å’Œæµ®ç‚¹æ•°çš„æ³›åž‹å‡½æ•°ã€‚

---

### æ·»åŠ ä¸€ä¸ªèƒ½å¤„ç†å¤šç§ç±»åž‹çš„æ³›åž‹å‡½æ•°

åœ¨è¿™ä¸€æ­¥ï¼Œä½ å°†åˆ›å»ºä¸€ä¸ª**æ³›åž‹å‡½æ•°**ï¼Œå®ƒå¯ä»¥æŽ¥æ”¶åŒ…å«æ•´æ•°æˆ–æµ®ç‚¹æ•°çš„æ˜ å°„ï¼Œä»Žè€Œæ›¿ä»£ä¹‹å‰å†™çš„ä¸¤ä¸ªå‡½æ•°ã€‚

ä¸ºäº†æ”¯æŒå¤šç§ç±»åž‹ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦ä¸€ç§æ–¹å¼æ¥å£°æ˜Žå®ƒæ”¯æŒå“ªäº›ç±»åž‹ã€‚åŒæ—¶ï¼Œè°ƒç”¨å®ƒçš„ä»£ç ä¹Ÿéœ€è¦ä¸€ç§æ–¹å¼æ¥æŒ‡æ˜Žæ˜¯ç”¨æ•´æ•°è¿˜æ˜¯æµ®ç‚¹æ•°æ˜ å°„ã€‚

ä¸ºæ­¤ï¼Œä½ å°†ç¼–å†™ä¸€ä¸ªå¸¦æœ‰**ç±»åž‹å‚æ•°**ï¼ˆtype parametersï¼‰çš„å‡½æ•°ã€‚è¿™äº›ç±»åž‹å‚æ•°ä½¿å¾—å‡½æ•°å…·æœ‰â€œæ³›åž‹â€ç‰¹æ€§ï¼Œèƒ½å¤Ÿå¤„ç†ä¸åŒç±»åž‹çš„å‚æ•°ã€‚

ä½ å°†é€šè¿‡**ç±»åž‹å‚æ•°**å’Œ**æ™®é€šå‡½æ•°å‚æ•°**æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚

æ¯ä¸ªç±»åž‹å‚æ•°éƒ½æœ‰ä¸€ä¸ª**ç±»åž‹çº¦æŸ**ï¼ˆtype constraintï¼‰ï¼Œå®ƒç›¸å½“äºŽç±»åž‹å‚æ•°çš„â€œå…ƒç±»åž‹â€ã€‚çº¦æŸè§„å®šäº†è°ƒç”¨ä»£ç å¯ä»¥ä½¿ç”¨çš„å…·ä½“ç±»åž‹ã€‚

è™½ç„¶ç±»åž‹çº¦æŸé€šå¸¸ä»£è¡¨ä¸€ç»„ç±»åž‹ï¼Œä½†åœ¨ç¼–è¯‘æ—¶ï¼Œç±»åž‹å‚æ•°ä»£è¡¨çš„æ˜¯**å•ä¸€ç±»åž‹**â€”â€”å³è°ƒç”¨ä»£ç ä¼ å…¥çš„ç±»åž‹ã€‚å¦‚æžœä¼ å…¥çš„ç±»åž‹ä¸è¢«çº¦æŸå…è®¸ï¼Œä»£ç å°†æ— æ³•ç¼–è¯‘ã€‚

è®°ä½ï¼šç±»åž‹å‚æ•°å¿…é¡»æ”¯æŒæ³›åž‹ä»£ç ä¸­å¯¹å®ƒæ‰§è¡Œçš„æ‰€æœ‰æ“ä½œã€‚ä¾‹å¦‚ï¼Œå¦‚æžœä½ çš„å‡½æ•°è¯•å›¾å¯¹ä¸€ä¸ªæ•°å€¼ç±»åž‹æ‰§è¡Œå­—ç¬¦ä¸²æ“ä½œï¼ˆå¦‚ç´¢å¼•ï¼‰ï¼Œä»£ç å°†æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚

åœ¨æŽ¥ä¸‹æ¥çš„ä»£ç ä¸­ï¼Œä½ å°†ä½¿ç”¨ä¸€ä¸ªå…è®¸ `int64` æˆ– `float64` ç±»åž‹çš„çº¦æŸã€‚

#### ç¼–å†™ä»£ç 

1. åœ¨ä¹‹å‰ä¸¤ä¸ªå‡½æ•°ä¸‹æ–¹ï¼Œæ·»åŠ ä»¥ä¸‹æ³›åž‹å‡½æ•°ï¼š

   ```go
   // SumIntsOrFloats è®¡ç®— map ä¸­æ‰€æœ‰å€¼çš„æ€»å’Œï¼Œæ”¯æŒ int64 å’Œ float64 ç±»åž‹
   func SumIntsOrFloats[K comparable, V int64 | float64](m map[K]V) V {
       var s V
       for _, v := range m {
           s += v
       }
       return s
   }
   ```

   è¯´æ˜Žï¼š

    - å‡½æ•°æœ‰ä¸¤ä¸ªç±»åž‹å‚æ•°ï¼š`K` å’Œ `V`ï¼Œå†™åœ¨æ–¹æ‹¬å· `[]` å†…ï¼›
    - `K` çš„çº¦æŸæ˜¯ `comparable`ï¼Œè¿™æ˜¯ Go å†…ç½®çš„é¢„å®šä¹‰çº¦æŸï¼Œè¡¨ç¤ºè¯¥ç±»åž‹å¯ä»¥ç”¨äºŽ `==` å’Œ `!=` æ¯”è¾ƒã€‚ç”±äºŽæ˜ å°„çš„é”®å¿…é¡»æ˜¯å¯æ¯”è¾ƒçš„ï¼Œæ‰€ä»¥ `K` å¿…é¡»æ˜¯ `comparable`ï¼›
    - `V` çš„çº¦æŸæ˜¯ `int64 | float64`ï¼Œè¡¨ç¤º `V` å¯ä»¥æ˜¯ `int64` æˆ– `float64` ä¸­çš„ä»»æ„ä¸€ç§ï¼ˆ`|` è¡¨ç¤ºç±»åž‹è”åˆï¼‰ï¼›
    - å‡½æ•°å‚æ•° `m` çš„ç±»åž‹æ˜¯ `map[K]V`ï¼Œå³é”®ä¸º `K`ã€å€¼ä¸º `V` çš„æ˜ å°„ï¼›
    - è¿”å›žå€¼ç±»åž‹ä¹Ÿæ˜¯ `V`ã€‚

2. åœ¨ `main` å‡½æ•°ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç æ¥è°ƒç”¨æ³›åž‹å‡½æ•°ï¼š

   ```go
   fmt.Printf("æ³›åž‹æ±‚å’Œ: %v å’Œ %v\n",
       SumIntsOrFloats[string, int64](ints),
       SumIntsOrFloats[string, float64](floats))
   ```

   è¯´æ˜Žï¼š

    - è°ƒç”¨æ³›åž‹å‡½æ•°æ—¶ï¼Œéœ€è¦åœ¨æ–¹æ‹¬å·ä¸­æŒ‡å®š**ç±»åž‹å‚æ•°**ï¼ˆtype argumentsï¼‰ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨ `K` å’Œ `V` åº”è¯¥æ˜¯ä»€ä¹ˆç±»åž‹ï¼›
    - ä¾‹å¦‚ï¼Œ`[string, int64]` è¡¨ç¤º `K` æ˜¯ `string`ï¼Œ`V` æ˜¯ `int64`ï¼›
    - å¦‚ä¸‹èŠ‚æ‰€è¿°ï¼Œå¾ˆå¤šæ—¶å€™ä½ å¯ä»¥çœç•¥è¿™äº›ç±»åž‹å‚æ•°ï¼ŒGo èƒ½è‡ªåŠ¨æŽ¨æ–­ã€‚

#### è¿è¡Œä»£ç 

```bash
$ go run .
```

è¾“å‡ºåº”ä¸ºï¼š

```
éžæ³›åž‹æ±‚å’Œ: 46 å’Œ 62.97
æ³›åž‹æ±‚å’Œ: 46 å’Œ 62.97
```

Go ç¼–è¯‘å™¨åœ¨æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œä¼šç”¨å…·ä½“çš„ç±»åž‹æ›¿æ¢æ³›åž‹å‡½æ•°ä¸­çš„ç±»åž‹å‚æ•°ã€‚

---

### è°ƒç”¨æ³›åž‹å‡½æ•°æ—¶çœç•¥ç±»åž‹å‚æ•°

åœ¨è¿™ä¸€æ­¥ï¼Œä½ å°†ç®€åŒ–è°ƒç”¨æ–¹å¼ï¼Œ**çœç•¥ç±»åž‹å‚æ•°**ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼ŒGo ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®å‡½æ•°å‚æ•°çš„ç±»åž‹è‡ªåŠ¨æŽ¨æ–­å‡ºç±»åž‹å‚æ•°ã€‚

> **æ³¨æ„**ï¼šè¿™å¹¶ä¸æ€»æ˜¯å¯è¡Œã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæ³›åž‹å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œä½ å°±å¿…é¡»æ˜¾å¼å†™å‡ºç±»åž‹å‚æ•°ã€‚

#### ç¼–å†™ä»£ç 

åœ¨ `main` å‡½æ•°ä¸­æ·»åŠ ï¼š

```go
fmt.Printf("æ³›åž‹æ±‚å’Œï¼Œç±»åž‹å‚æ•°å·²æŽ¨æ–­: %v å’Œ %v\n",
    SumIntsOrFloats(ints),
    SumIntsOrFloats(floats))
```

è¿™é‡Œæˆ‘ä»¬çœç•¥äº† `[string, int64]` å’Œ `[string, float64]`ï¼Œå› ä¸º Go å¯ä»¥ä»Ž `ints` å’Œ `floats` çš„ç±»åž‹æŽ¨æ–­å‡ºè¿™äº›ä¿¡æ¯ã€‚

#### è¿è¡Œä»£ç 

```bash
$ go run .
```

è¾“å‡ºåº”ä¸ºï¼š

```
éžæ³›åž‹æ±‚å’Œ: 46 å’Œ 62.97
æ³›åž‹æ±‚å’Œ: 46 å’Œ 62.97
æ³›åž‹æ±‚å’Œï¼Œç±»åž‹å‚æ•°å·²æŽ¨æ–­: 46 å’Œ 62.97
```

---

### å£°æ˜Žä¸€ä¸ªç±»åž‹çº¦æŸ

åœ¨æœ€åŽä¸€éƒ¨åˆ†ï¼Œä½ å°†æŠŠä¹‹å‰å®šä¹‰çš„ç±»åž‹è”åˆï¼ˆ`int64 | float64`ï¼‰æå–åˆ°ä¸€ä¸ª**æŽ¥å£**ä¸­ï¼Œä½œä¸ºä¸€ä¸ªå¯å¤ç”¨çš„ç±»åž‹çº¦æŸã€‚è¿™æ ·å¯ä»¥è®©ä»£ç æ›´ç®€æ´ï¼Œå°¤å…¶æ˜¯å½“çº¦æŸå˜å¾—å¤æ‚æ—¶ã€‚

ä½ å¯ä»¥å°†ç±»åž‹çº¦æŸå£°æ˜Žä¸ºä¸€ä¸ªæŽ¥å£ã€‚è¯¥çº¦æŸå…è®¸ä»»ä½•å®žçŽ°è¯¥æŽ¥å£çš„ç±»åž‹ã€‚æŽ¥å£ä¸­ä¹Ÿå¯ä»¥ç›´æŽ¥åŒ…å«å…·ä½“ç±»åž‹ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚

#### ç¼–å†™ä»£ç 

1. åœ¨ `import` è¯­å¥ä¹‹åŽã€`main` å‡½æ•°ä¹‹å‰ï¼Œæ·»åŠ ä»¥ä¸‹æŽ¥å£å®šä¹‰ï¼š

   ```go
   // Number æ˜¯ä¸€ä¸ªç±»åž‹çº¦æŸï¼Œè¡¨ç¤º int64 æˆ– float64
   type Number interface {
       int64 | float64
   }
   ```

   è¿™ç›¸å½“äºŽæŠŠ `int64 | float64` å°è£…æˆäº†ä¸€ä¸ªåä¸º `Number` çš„â€œç±»åž‹é›†åˆâ€ã€‚

2. åœ¨å·²æœ‰å‡½æ•°ä¸‹æ–¹ï¼Œæ·»åŠ æ–°çš„æ³›åž‹å‡½æ•°ï¼š

   ```go
   // SumNumbers è®¡ç®— map ä¸­æ‰€æœ‰å€¼çš„æ€»å’Œï¼Œæ”¯æŒæ•´æ•°å’Œæµ®ç‚¹æ•°
   func SumNumbers[K comparable, V Number](m map[K]V) V {
       var s V
       for _, v := range m {
           s += v
       }
       return s
   }
   ```

   è¿™ä¸ªå‡½æ•°é€»è¾‘ä¸Žä¹‹å‰ç›¸åŒï¼Œä½†ä½¿ç”¨äº† `Number` æŽ¥å£ä½œä¸º `V` çš„çº¦æŸã€‚

3. åœ¨ `main` å‡½æ•°ä¸­è°ƒç”¨æ–°å‡½æ•°ï¼š

   ```go
   fmt.Printf("å¸¦çº¦æŸçš„æ³›åž‹æ±‚å’Œ: %v å’Œ %v\n",
       SumNumbers(ints),
       SumNumbers(floats))
   ```

   å†æ¬¡çœç•¥äº†ç±»åž‹å‚æ•°ï¼Œç”± Go è‡ªåŠ¨æŽ¨æ–­ã€‚

#### è¿è¡Œä»£ç 

```bash
$ go run .
```

è¾“å‡ºåº”ä¸ºï¼š

```
éžæ³›åž‹æ±‚å’Œ: 46 å’Œ 62.97
æ³›åž‹æ±‚å’Œ: 46 å’Œ 62.97
æ³›åž‹æ±‚å’Œï¼Œç±»åž‹å‚æ•°å·²æŽ¨æ–­: 46 å’Œ 62.97
å¸¦çº¦æŸçš„æ³›åž‹æ±‚å’Œ: 46 å’Œ 62.97
```

---

### ç»“è¯­

ðŸŽ‰ å¹²å¾—æ¼‚äº®ï¼ä½ å·²ç»æˆåŠŸå…¥é—¨äº† Go çš„æ³›åž‹ç¼–ç¨‹ï¼

#### å»ºè®®åŽç»­å­¦ä¹ ï¼š

- [Go è¯­è¨€ä¹‹æ—…](https://go.dev/tour/) æ˜¯å­¦ä¹  Go åŸºç¡€çš„ç»ä½³äº’åŠ¨æ•™ç¨‹ã€‚
- ã€Š[Effective Go](https://go.dev/doc/effective_go)ã€‹å’Œã€Š[å¦‚ä½•ç¼–å†™ Go ä»£ç ](https://go.dev/doc/code)ã€‹ä¸­åŒ…å«äº†å¤§é‡å®žç”¨çš„ Go æœ€ä½³å®žè·µã€‚

---

### å®Œæ•´ä»£ç 

ä»¥ä¸‹æ˜¯æœ¬æ•™ç¨‹çš„å®Œæ•´ä»£ç ï¼š

```go
package main

import "fmt"

// Number æ˜¯ä¸€ä¸ªç±»åž‹çº¦æŸï¼Œè¡¨ç¤º int64 æˆ– float64
type Number interface {
    int64 | float64
}

func main() {
    // åˆå§‹åŒ–ä¸€ä¸ªå­˜å‚¨ int64 å€¼çš„æ˜ å°„
    ints := map[string]int64{
        "first":  34,
        "second": 12,
    }
    // åˆå§‹åŒ–ä¸€ä¸ªå­˜å‚¨ float64 å€¼çš„æ˜ å°„
    floats := map[string]float64{
        "first":  35.98,
        "second": 26.99,
    }

    fmt.Printf("éžæ³›åž‹æ±‚å’Œ: %v å’Œ %v\n",
        SumInts(ints),
        SumFloats(floats))

    fmt.Printf("æ³›åž‹æ±‚å’Œ: %v å’Œ %v\n",
        SumIntsOrFloats[string, int64](ints),
        SumIntsOrFloats[string, float64](floats))

    fmt.Printf("æ³›åž‹æ±‚å’Œï¼Œç±»åž‹å‚æ•°å·²æŽ¨æ–­: %v å’Œ %v\n",
        SumIntsOrFloats(ints),
        SumIntsOrFloats(floats))

    fmt.Printf("å¸¦çº¦æŸçš„æ³›åž‹æ±‚å’Œ: %v å’Œ %v\n",
        SumNumbers(ints),
        SumNumbers(floats))
}

// SumInts è®¡ç®— map ä¸­æ‰€æœ‰ int64 å€¼çš„æ€»å’Œ
func SumInts(m map[string]int64) int64 {
    var s int64
    for _, v := range m {
        s += v
    }
    return s
}

// SumFloats è®¡ç®— map ä¸­æ‰€æœ‰ float64 å€¼çš„æ€»å’Œ
func SumFloats(m map[string]float64) float64 {
    var s float64
    for _, v := range m {
        s += v
    }
    return s
}

// SumIntsOrFloats è®¡ç®— map ä¸­æ‰€æœ‰å€¼çš„æ€»å’Œï¼Œæ”¯æŒ int64 å’Œ float64 ç±»åž‹
func SumIntsOrFloats[K comparable, V int64 | float64](m map[K]V) V {
    var s V
    for _, v := range m {
        s += v
    }
    return s
}

// SumNumbers è®¡ç®— map ä¸­æ‰€æœ‰å€¼çš„æ€»å’Œï¼Œæ”¯æŒæ•´æ•°å’Œæµ®ç‚¹æ•°
func SumNumbers[K comparable, V Number](m map[K]V) V {
    var s V
    for _, v := range m {
        s += v
    }
    return s
}
```
> **[â†© è¿”å›žåˆ°ç›®å½•](../doc.md)**